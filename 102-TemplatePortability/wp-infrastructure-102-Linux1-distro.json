{
  "AWSTemplateFormatVersion": "2010-09-09",
  "Description": "A template with a Mapping to allow it to be run in a number of regions.  Must use Linux (1) distro. Feel free to update the AMIs if there is a newere Linux (1) version",

	"Parameters": {
		"EnvironmentSize": {
			"Type": "String",
			"Default": "SMALL",
			"AllowedValues": [	"SMALL", "MEDIUM", "LARGE" ],
			"Description": "Select Environment Size (S,M,L)"
		}
	},
	"Mappings": {
		"RegionMap": {
			"us-east-1"     : { "AMALINUX": "ami-09479453c5cde9639" },
			"us-east-2"     : { "AMALINUX": "ami-023c8dbf8268fb3ca" },

			"us-west-1"     : { "AMALINUX": "ami-06ff511fea5db2c99" },
			"us-west-2"     : { "AMALINUX": "ami-0bb5806b2e825a199" },

      "sa-east-1"     : {	"AMALINUX": "ami-09b9eaea4f33f0200"	},
			"ca-central-1"  : { "AMALINUX": "ami-0bce70e886ac6890a"  },

			"eu-west-1"     : { "AMALINUX": "ami-031a3db8bacbcdc20"  },
			"eu-west-2"     : { "AMALINUX": "ami-0307e8ce88a8245d4"	},
      "eu-central-1"  : { "AMALINUX": "ami-07f1aa69c7c7b01c9" 	},

			"ap-southeast-1": {	"AMALINUX": "ami-07ad70c269d8a418c" 	},
			"ap-southeast-2": {	"AMALINUX": "ami-0aff30363d302d23a"	},

      "ap-northeast-1": {	"AMALINUX": "ami-063fa8762cdc9a5a6"	},
			"ap-northeast-2": {	"AMALINUX": "ami-0076ae0908f382581"	},

      "ap-south-1"    : {	"AMALINUX": "ami-0bc6e84391ec20816"	},

      "cn-north-1"    : {	"AMALINUX": "ami-8e6aa0e3"        	}

		},
		"InstanceSize": {
			"SMALL" : { "EC2": "t2.micro",  "DB": "db.t2.micro" },
			"MEDIUM": { "EC2": "t2.small",  "DB": "db.t2.small" },
			"LARGE" : {	"EC2": "t2.medium",	"DB": "db.t2.medium" }
		}
	},
	"Resources": {
		"DB": {
			"Type": "AWS::RDS::DBInstance",
			"Properties": {
				"AllocatedStorage": 5,
				"StorageType" : "gp2",
				"DBInstanceClass": {"Fn::FindInMap" : ["InstanceSize", {"Ref" : "EnvironmentSize"}, "DB"]},
				"DBName": "wordpress",
				"Engine": "MySQL",
				"MasterUsername": "wordpress",
				"MasterUserPassword": "w0rdpr355"
			}
		},
		"EC2": {
			"Type": "AWS::EC2::Instance",
			"Properties": {
				"ImageId": {"Fn::FindInMap" : ["RegionMap", {"Ref" : "AWS::Region"}, "AMALINUX"]},
				"InstanceType": {"Fn::FindInMap" : ["InstanceSize", {"Ref" : "EnvironmentSize"}, "EC2"]}
			}
		},
		"S3": {
			"Type": "AWS::S3::Bucket"
		}
	}
}
